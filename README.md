# Автомат по продаже напитков

## Введение
Данный проект - это реализация [тестового задания](task.md) на разработку Web приложения.
Проект сделан в среде Visual Studio 2022 на .NET 6.

## Описание
Это ASP.NET Core, Blazor (server side) приложение.
Для хранения данных используется БД SQL localDb. 
 
>Строка подключения прописана в файле **appsettings.json**. При необходимости можно поменять абсолютный путь к файлу.
При отсутствии базы данных, она создается автоматически с начальным набором данных.
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\MSSQLLocalDB;Initial Catalog=VendingMachineDb;Integrated Security=true;AttachDBFilename=D:\\Visual Studio Active Projects\\ISTest\\ISTest\\App_Data\\VendingMachineDb.mdf"
  }
}
```

## Пользовательский интерфейс
По базовому адресу находится страница, иммитирующая работу автомата напитков.
Пользователь может покупать различные напитки, внося необходимую сумму и забирать сдачу.
##### Дисплей
В верхней части находится дисплей, показывающий внесенную сумму, а так же сообщения о ходе работы.
##### Монетоприемник
Пользователь может вносить монеты в автомат. Если в автомате отключен прием данных монет, они автоматически возвращаются в лоток для здачи (в нижней части окна).
##### Напитки
Все загруженные в автомат напитки отображаются в центральной части. 
Под каждым напитком указана его стоимость. Если внесенная сумма недостаточна, то кнопка покупки блокируется.
Если напиток закончился, появляется соответствующая надпись.
##### Лоток для сдачи
При наличии остатка на счете, пользователь может получить сдачу, нажав соответствующую кнопку.

## Административный интерфейс
Доступ к административному интерфейсу открывается по адресу **../admin/[adminkey]**,
где **[adminkey]** - секретный ключ администратора.
>Секретный ключ прописан в файле **appsettings.json**.
>При необходимости измените его
```json
{
  "AdminKey": "8*bEucS9u-wpAx!9S5$)"
}
```
Интерфейс поделен на 2 части:
- В левой отображаются списки загруженных в автомат напитков и монет;
- В правой части - номенклатура напитков и монет.

##### Изменение напитков в автомате
Для изменения количества напитков необходимо в левой части в строке каждого напитка изменить количество.
Для удаления напитка из автомата необходимо нажать соответствующую кнопку.
Для добавления напитка в автомат, необходимо в перечне напитков в правой части нажать кнопку "+". Эта кнопка не отображается, если напиток уже добавлен в автомат.
##### Изменение монет в автомате
В левой чати можно изменить количество монет, аналогично изменению напитков.
##### Номенклатура напитков
В правой части находится окно для управления номенклатурой напитков. 
Можно редактировать, добавлять и удалять напитки. 
Предусмотрена возможность импорта напитков из [.xlsx](LoadBeveragesExample.xlsx) файла
> Перечень напитков должен находиться на первом листе файла.
> Перечень напитков должен начинаться со второй строки. 
> В первом столбце - название напитка, во втором - стоимость, в третьем - объем

При наличии в номенклатуре напитка с таким же названием и объемом как в импортируемом файле, импорт по позиции не осуществляется.
**После всех изменений, необходимо нажать кнопку *Сохранить***




